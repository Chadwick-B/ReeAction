(()=>{"use strict";navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{(e=>{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createMediaStreamSource(e),o=t.createAnalyser();o.fftSize=256,n.connect(o),o.connect(t.destination);const i=o.frequencyBinCount,c=new Uint8Array(i);o.getByteFrequencyData(c);const r=document.getElementById("canvas"),a=r.getContext("2d"),s=()=>{a.clearRect(0,0,r.width,r.height),requestAnimationFrame(s),o.getByteFrequencyData(c),a.lineWidth=2,a.strokeStyle="rgb(230, 230, 230)",a.beginPath();const e=r.width/i;let t=0;for(let n=0;n<i;n++){const o=c[n]/128,i=r.height/2-o*r.height/2;0===n?a.moveTo(t,i):a.lineTo(t,i),t+=e}a.lineTo(r.width,r.height/2),a.stroke()};s()})(e)})).catch((()=>{alert("Microphone not found.")})),(()=>{window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;const e=new SpeechRecognition;e.interimResults=!0;const t=document.getElementById("overlay");e.addEventListener("result",(e=>{const n=Array.from(e.results).map((e=>e[0])).map((e=>e.transcript)).join("");t.textContent=n,e.results[0].isFinal&&console.log("a")})),e.addEventListener("end",e.start),e.start()})()})();