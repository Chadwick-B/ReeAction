(()=>{"use strict";navigator.getUserMedia({audio:!0},(e=>(e=>{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createMediaStreamSource(e),o=t.createAnalyser();o.fftSize=256,n.connect(o),o.connect(t.destination);const i=o.frequencyBinCount,r=new Uint8Array(i);o.getByteFrequencyData(r);const c=document.getElementById("canvas"),a=c.getContext("2d"),s=()=>{a.clearRect(0,0,c.width,c.height),requestAnimationFrame(s),o.getByteFrequencyData(r),a.lineWidth=2,a.strokeStyle="rgb(230, 230, 230)",a.beginPath();const e=c.width/i;let t=0;for(let n=0;n<i;n++){const o=r[n]/128,i=c.height/2-o*c.height/2;0===n?a.moveTo(t,i):a.lineTo(t,i),t+=e}a.lineTo(c.width,c.height/2),a.stroke()};s()})(e)),(()=>alert("Microphone not found."))),(()=>{window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;const e=new SpeechRecognition;e.interimResults=!0;const t=document.getElementById("overlay");e.addEventListener("result",(e=>{const n=Array.from(e.results).map((e=>e[0])).map((e=>e.transcript)).join("");t.textContent=n,e.results[0].isFinal&&console.log("a")})),e.addEventListener("end",e.start),e.start()})()})();